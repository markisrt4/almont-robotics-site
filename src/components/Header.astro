---
const base = import.meta.env.BASE_URL;

const links = [
  { href: "", label: "Home" },
  { href: "about/", label: "About" },
  { href: "robots/", label: "Robots" },
  { href: "media/", label: "Media" },
  { href: "sponsors/", label: "Sponsors" },
  { href: "contact/", label: "Contact" }
];
---

<header class="nav" id="site-nav">
  <div class="container nav-inner">
    <!-- Brand -->
    <a class="brand" href={`${base}`}>
      <div class="title">Almont Robotics</div>
      <div class="sub">FRC 4961</div>
    </a>

    <!-- Desktop Nav -->
    <nav class="navlinks desktop" aria-label="Primary navigation">
      {links.map(l => (
        <a href={`${base}${l.href}`}>{l.label}</a>
      ))}
    </nav>

    <!-- Mobile Menu Button -->
    <button
      class="menu-btn"
      type="button"
      aria-label="Open menu"
      aria-controls="mobile-menu"
      aria-expanded="false"
      onclick="(function(btn){ const nav=document.getElementById('site-nav'); const open=nav.classList.toggle('open'); btn.setAttribute('aria-expanded', open ? 'true':'false'); })(this)"
    >
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Menu -->
  <nav class="mobile-menu" id="mobile-menu" aria-label="Mobile navigation">
    {links.map(l => (
      <a
        href={`${base}${l.href}`}
        onclick="(function(a){ const nav=a.closest('.nav'); nav.classList.remove('open'); const btn=nav.querySelector('.menu-btn'); if(btn) btn.setAttribute('aria-expanded','false'); })(this)"
      >
        {l.label}
      </a>
    ))}
  </nav>

  <style>
    .nav-inner { display:flex; align-items:center; justify-content:space-between; gap:1rem; }

    /* Desktop */
    .navlinks.desktop { display:flex; gap:.75rem; align-items:center; }

    /* Mobile */
    .menu-btn{
      display:none;
      background:none;
      border:0;
      padding:.35rem;
      cursor:pointer;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .menu-btn span{
      display:block;
      width: 22px;
      height: 2px;
      background: rgba(255,255,255,.88);
      margin: 4px 0;
      transition: transform .2s ease, opacity .2s ease;
    }

    .mobile-menu{
      display:none;
      flex-direction:column;
      gap:.4rem;
      padding: .75rem 1rem 1rem;
      background: rgba(7,9,7,.92);
      border-top:1px solid rgba(255,255,255,.08);
    }
    .mobile-menu a{
      padding:.75rem .85rem;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      font-weight: 700;
      color: rgba(255,255,255,.92);
    }

    @media (max-width: 820px){
      .navlinks.desktop{ display:none; }
      .menu-btn{ display:block; }
      .nav.open .mobile-menu{ display:flex; }

      .nav.open .menu-btn span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
      .nav.open .menu-btn span:nth-child(2){ opacity:0; }
      .nav.open .menu-btn span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }
    }
  </style>
</header>